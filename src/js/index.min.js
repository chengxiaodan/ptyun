!function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";var i=a(1),n=function(e){return e&&e.__esModule?e:{default:e}}(i);n.default.namespace("PT.Index"),PT.Index=function(){this.appList=10,this.count=0,this.pageCount=0,this.current=1,this.limit=10,this.mark=0,this.http=n.default.http(),this.datas=[];this.init(),this.bindEvent()},PT.Index.prototype={init:function(){var e=this;e.appList=10,e.cookieObj=n.default.getToken(),e.active("appManage"),e.getApplist("appManage")},bindEvent:function(){var e=this;$("#appSecretKey").val(e.http.secretkey);for(var t=$(".left-main ul li"),a=0;a<t.length;a++)!function(i){$(t[a]).click(function(){$(this).siblings("li").find("a").removeClass("active"),$(this).find("a").addClass("active");var t=$(this).find("a").data("id");e.active(t)})}();$("input").keyup(function(){0==$(this).val().length?$(this).siblings(".tip").hide():$(this).siblings(".tip").show()}),$("textarea").keyup(function(){0==$(this).val().length?$(this).siblings(".tip").hide():$(this).siblings(".tip").show()}),$("#addAPPbtn").click(function(){$("#addAppUrl").val(""),$("#addAppType").val(""),$("#addAppBuildId").val(""),$("#addAppDes").val(""),$("#addAppName").val(""),$("#addAppVersion").val(""),$("#addapp_error").hide(),$("#addAPP").show()}),$("#save_addApp").on("click",function(t){""!==$.trim($("#addAppName").val())?e.addApp():($("#addapp_error").text("应用名称不能为空"),$("#addapp_error").show()),t.preventDefault()}),$("#deleteAPPbtn").click(function(){e.deleteValue()}),$(".cancle").click(function(){$("#addAPP").hide(),$("#editAPP").hide(),$("#deleteAPP").hide()})},getApplist:function(e){var t=this,a={limit:t.limit+"",offset:0==t.mark?t.mark+"":t.appList+""};$.ajax({type:"post",url:t.http.server,headers:{method:"cloud.app.list",appid:t.http.appid,sign:n.default.getSign(JSON.stringify(a),t.http.secretkey),timestramp:Date.parse(new Date)/1e3,token:t.cookieObj.token,uid:t.cookieObj.uid},data:JSON.stringify(a),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(){var e=$('<div class="loadingMask"></div>');$('<div class="loadEffect"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>').appendTo(e),e.appendTo("body")},complete:function(){$(".loadingMask").remove()},cache:!1,success:function(a){if(62002==a.error_code)n.default.confirmBox("token错误,请重新登录!");else if(0==a.error_code){var i=a.data;t.count=a.count,0!==i.length&&($.each(i,function(a,i){t.datas.push(i),a<=9&&t.renderTable(e,i)}),t.clickBtn()),t.count>10?($("#appPage").show(),t.pageCount=Math.ceil(t.count/t.limit),t.current=0==t.mark?1:t.appList/t.limit+1,t.mark=1,$("#appPage").perfectPager({pageCount:t.pageCount,current:t.current,easyMode:!0,callback:function(a){t.appList=(a-1)*t.limit,$("#"+e+"Table").empty(),t.getApplist(e)}}).appendTo($("#appPage"))):$("#appPage").hide()}else n.default.showBox("获取数据失败")},error:function(e,t,a){}})},clickBtn:function(){var e=this;$("#appManage tr td a").on("click",function(){var t=($(this).parent().parent().find("td").index($(this).parent()),$(this).parent().parent().parent().find("tr").index($(this).parent().parent())),a=$(this).parent().parent().parent().find("tr:eq("+t+")").data("id").substring(3),i=$(this);$.each(e.datas,function(t,n){if(parseInt(a)==n.id){switch(i.text()){case"编辑":e.editValue(n)}}})})},cacheData:function(){for(var e=[],t=$("#appManageTable  td input[type=checkbox]"),a=0;a<t.length;a++)!function(a){var i=($(t[a]).parent().parent().parent(),$(t[a]).parent().parent().parent().parent());1==t[a].checked&&e.push(parseInt(i.data("id").substring(3)))}(a);return e},getCheckApp:function(){for(var e=this,t=[],a=e.cacheData(),i=0;i<a.length;i++)$.each(e.datas,function(e,n){a[i]==n.id&&t.push(n)});return t},reset:function(){var e=this;e.appList=10,$("#appManageTable").empty(),e.getApplist("appManage"),$("#addAPP").hide(),$("#editAPP").hide(),$("#deleteAPP").hide()},addApp:function(){for(var e=this,t=[],a=$("#addAPP").find("ul li input[type=checkbox]"),i=0;i<a.length;i++)!function(e){1==a[e].checked&&t.push(a[e].value)}(i);var o=e.getSelected(t)+"",p={name:$("#addAppName").val(),description:$("#addAppDes").val(),version:$("#addAppVersion").val(),url:$("#addAppUrl").val(),type:$("#addAppType").val(),build_id:$("#addAppBuildId").val(),attrs:o};$.ajax({type:"post",url:e.http.server,headers:{method:"cloud.app.add",appid:e.http.appid,sign:n.default.getSign(JSON.stringify(p),e.http.secretkey),timestramp:Date.parse(new Date)/1e3,token:e.cookieObj.token,uid:e.cookieObj.uid},data:JSON.stringify(p),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(){var e=$('<div class="loadingMask"></div>');$('<div class="loadEffect"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>').appendTo(e),e.appendTo("body")},complete:function(){$(".loadingMask").remove()},cache:!1,success:function(t){62002==t.error_code?n.default.confirmBox("token错误,请重新登录!"):0==t.error_code?(e.reset(),$("#addapp_error").hide()):n.default.showBox(t.msg)},error:function(e,t,a){}})},showTip:function(){for(var e=$("input"),t=0;t<e.length;t++)!function(t){0==$.trim($(e[t]).val()).length?$(e[t]).siblings(".tip").hide():$(e[t]).siblings(".tip").show()}(t);0==$.trim($("textarea").val()).length?$("textarea").siblings(".tip").hide():$("textarea").siblings(".tip").show()},editValue:function(e){var t=this;$("#editapp_error").hide(),$("#editAppId").val(""),$("#editAppUrl").val(""),$("#editAppType").val(""),$("#editAppBuildId").val(""),$("#editAppDes").val(""),$("#editAppName").val(""),$("#editAppVersion").val(""),$("#editAppId").val(e.appid),$("#editAppUrl").val(e.url),$("#editAppType").val(e.type),$("#editAppBuildId").val(e.build_id),$("#editAppDes").val(e.description),$("#editAppName").val(e.name),$("#editAppVersion").val(e.version);for(var a=$("#editAPP").find("ul li input[type=checkbox]"),i=t.getService(parseInt(e.attrs)),n=0;n<a.length;n++)!function(e){$.each(i,function(t,i){a[e].value==i.serviceName&&i.state&&(a[e].checked=!0)})}(n);t.showTip(),$("#editAPP").show(),$("#save_editApp").click(function(){if(""!==$.trim($("#editAppName").val())){for(var i=[],n=0;n<a.length;n++)1==a[n].checked&&i.push(a[n].value);var o=t.getSelected(i);e.attrs=o+"",t.editApp(e)}else $("#editapp_error").text("应用名称不能为空"),$("#editapp_error").show()})},editApp:function(e){var t=this,a={appid:e.appid,name:$("#editAppName").val(),description:$("#editAppDes").val(),version:$("#editAppVersion").val(),url:$("#editAppUrl").val(),type:$("#editAppType").val(),build_id:$("#editAppBuildId").val(),attrs:e.attrs};$.ajax({type:"post",url:t.http.server,headers:{method:"cloud.app.edit",appid:t.http.appid,sign:n.default.getSign(JSON.stringify(a),t.http.secretkey),timestramp:Date.parse(new Date)/1e3,token:t.cookieObj.token,uid:t.cookieObj.uid},data:JSON.stringify(a),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(){var e=$('<div class="loadingMask"></div>');$('<div class="loadEffect"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>').appendTo(e),e.appendTo("body")},complete:function(){$(".loadingMask").remove()},cache:!1,success:function(e){62002==e.error_code?n.default.confirmBox("token错误,请重新登录!"):0==e.error_code?(t.reset(),$("#editapp_error").hide()):n.default.showBox("编辑失败")},error:function(e,t,a){}})},deleteValue:function(){var e=this,t=e.getCheckApp(),a=[];0==t.length?n.default.showBox("请选择数据"):($("#deleteAPP").show(),$("#deletetr").on("click",function(){a=t;var i=[];$.each(a,function(e,t){i.push(t.appid)}),e.deleteApp(i)}))},deleteApp:function(e){for(var t=this,a="",i=0;i<e.length;i++)a=0==i?e[i]+"":a+";"+e[i];var o={appid:a};$.ajax({type:"post",url:t.http.server,headers:{method:"cloud.app.delete",appid:t.http.appid,sign:n.default.getSign(JSON.stringify(o),t.http.secretkey),timestramp:Date.parse(new Date)/1e3,token:t.cookieObj.token,uid:t.cookieObj.uid},data:JSON.stringify(o),dataType:"json",contentType:"application/json; charset=utf-8",beforeSend:function(){var e=$('<div class="loadingMask"></div>');$('<div class="loadEffect"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>').appendTo(e),e.appendTo("body")},complete:function(){$(".loadingMask").remove()},cache:!1,success:function(e){62002==e.error_code?n.default.confirmBox("token错误,请重新登录!"):0==e.error_code?t.reset():n.default.showBox("删除失败")},error:function(e,t,a){}})},renderTable:function(e,t){var a=this,i=$('<tr data-id="tr_'+t.id+'"></tr>');if("appManage"==e){var n=$('<td><div class="cloud-check"><div class="checkbox"><input type="checkbox" name="checkbox" id="app_'+t.id+'" /><label for="app_'+t.id+'" class="btn-check"></label></div></div></td>'),o=$('<td title="'+t.name+'">'+t.name+"</td>"),p=$('<td title="'+t.appid+'">'+t.appid+"</td>"),s=$('<td title="'+t.secret_key+'">'+t.secret_key+"</td>"),c=$("<td></td>"),r=$('<div class="service-list"></div>'),d=$("<ul></ul>"),l=$("<ul></ul>"),u=$("<ul></ul>"),h=$("<ul></ul>"),f=null,v=null,m=null,g=null,k=a.getService(parseInt(t.attrs));$.each(k,function(e,t){e<=1?(f=t.state?$('<li><div class="service-info success" data-state="true">'+t.serviceName+"</li>"):$('<li><div class="service-info fail">'+t.serviceName+"</li>"),f.appendTo(d)):e>1&&e<=3?(v=t.state?$('<li><div class="service-info success">'+t.serviceName+"</li>"):$('<li><div class="service-info fail">'+t.serviceName+"</li>"),v.appendTo(l)):e>3&&e<=5?(m=t.state?$('<li><div class="service-info success">'+t.serviceName+"</li>"):$('<li><div class="service-info fail">'+t.serviceName+"</li>"),m.appendTo(u)):e>5&&e<=7&&(g=t.state?$('<li><div class="service-info success">'+t.serviceName+"</li>"):$('<li><div class="service-info fail">'+t.serviceName+"</li>"),g.appendTo(h))}),r.appendTo(c),d.appendTo(r),f.appendTo(d),null!==v&&(l.appendTo(r),u.appendTo(r),h.appendTo(r));var A=$('<td title="'+t.version+'">'+t.version+"</td>"),b=$("<td><a>编辑</a></td>");n.appendTo(i),o.appendTo(i),s.appendTo(i),p.appendTo(i),c.appendTo(i),A.appendTo(i),b.appendTo(i)}$("#"+e+"Table").append(i)},getSelected:function(e){for(var t=0,a=0;a<e.length;a++)switch(e[a]){case"消息推送":t+=1;break;case"日志收集":t+=2;break;case"崩溃收集":t+=4;break;case"数据采集":t+=8;break;case"服务提供":t+=16;break;case"云存储":t+=32;break;case"语言识别":t+=64}return t},getService:function(e){var t=[],a={};return a.serviceName="消息推送",a.state=!!(1&e),t.push(a),a=new Object,a.serviceName="日志收集",a.state=!!(2&e),t.push(a),a=new Object,a.serviceName="崩溃收集",a.state=!!(4&e),t.push(a),a=new Object,a.serviceName="数据采集",a.state=!!(8&e),t.push(a),a=new Object,a.serviceName="服务提供",a.state=!!(16&e),t.push(a),a=new Object,a.serviceName="云存储",a.state=!!(32&e),t.push(a),a=new Object,a.serviceName="语言识别",a.state=!!(64&e),t.push(a),t},active:function(e){var t=["appManage","second","third"];$.each(t,function(a,i){e==i&&($("#"+i).show(),$.each(t,function(e,t){t!==i&&$("#"+t).hide()}))})}},$(document).ready(function(){new PT.Index})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={http:function(){return{server:"https://api-open.putao.com/",appid:"1018043273668494336",secretkey:"07E13AFF126A4CAFBE58171AAB1CEE51"}},getSign:function(e,t){return hex_sha1(hex_md5(e).toLowerCase()+t).toLowerCase()},namespace:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var i,n,o,p,s,c,r,d,l;for(i=t,d=i.length,c=0;c<d;c++)for(s=i[c].split("."),p=window[s[0]]=window[s[0]]||{},o=s.slice(1),l=o.length,r=0;r<l;r++)n=o[r],p=p[n]=p[n]||{}},isphone:function(e){return/^1[0-9]{10}$/.test(e)},fChkMail:function(e){return/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,5}$/.test(e)},fChkPassword:function(e){return/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/.test(e)},dateFormat:function(e){var t=e.getFullYear()+"/";return e.getMonth()+1<10&&(t+="0"),t+=e.getMonth()+1+"/",e.getDate()<10&&(t+="0"),t+=e.getDate()+" ",e.getHours()<10&&(t+="0"),t+=e.getHours()+":",e.getMinutes()<10&&(t+="0"),t+=e.getMinutes()},goEail:function(e,t){var a=document.getElementById(t),i=e.split("@")[1];i=i.toLowerCase();var n={"qq.com":"http://mail.qq.com","gmail.com":"http://mail.google.com","sina.com":"http://mail.sina.com.cn","163.com":"http://mail.163.com","126.com":"http://mail.126.com","yeah.net":"http://www.yeah.net/","sohu.com":"http://mail.sohu.com/","tom.com":"http://mail.tom.com/","sogou.com":"http://mail.sogou.com/","139.com":"http://mail.10086.cn/","hotmail.com":"http://www.hotmail.com","live.com":"http://login.live.com/","live.cn":"http://login.live.cn/","live.com.cn":"http://login.live.com.cn","189.com":"http://webmail16.189.cn/webmail/","yahoo.com.cn":"http://mail.cn.yahoo.com/","yahoo.cn":"http://mail.cn.yahoo.com/","eyou.com":"http://www.eyou.com/","21cn.com":"http://mail.21cn.com/","188.com":"http://www.188.com/","foxmail.com":"http://www.foxmail.com"};for(var o in n)a.href=n[i]?n[i]:"http://mail."+n[i]},progress:function(e,t){var a=document.getElementById(e);100==t?$("#"+e).hide():$("#"+e).show();var i=a.width/2,n=a.height/2,t=t;if(a.getContext){var o=a.getContext("2d");o.beginPath(),o.moveTo(i,n),o.arc(i,n,60,0,2*Math.PI,!1),o.closePath(),o.fillStyle="#f3f3f3",o.fill(),o.beginPath(),o.moveTo(i,n),o.lineWidth=10,o.arc(i,n,60,1.5*Math.PI,1.5*Math.PI-2*Math.PI*t/100,!0),o.closePath(),o.fillStyle="#8C61DA",o.fill(),o.beginPath(),o.moveTo(i,n),o.arc(i,n,54.4,0,2*Math.PI,!0),o.closePath(),o.fillStyle="#ffffff",o.fill(),o.font="bold 9pt Arial",o.fillStyle="#8C61DA",o.textAlign="center",o.textBaseline="middle",o.moveTo(i,n),o.fillText(t+"%",i,n)}},getUrlParameter:function(e){var t,a,i,n=window.location.search.substring(1);if(n)for(t=n.split("&"),a=0;a<t.length;a++)if(i=t[a].split("="),i[0]===e)return i[1]},setCookie:function(e,t,i){var n=a.getsec(i),o=new Date;o.setTime(o.getTime()+1*n),document.cookie=e+"="+escape(t)+";expires="+o.toGMTString()},getsec:function(e){var t=1*e.substring(1,e.length),a=e.substring(0,1);return"s"==a?1e3*t:"h"==a?60*t*60*1e3:"d"==a?24*t*60*60*1e3:void 0},getCookie:function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var a=getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())},clearCookie:function(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;expires="+new Date(0).toUTCString()},getToken:function(){var e={};return null!==a.getCookie("token")?(e.token=a.getCookie("token"),e.uid=a.getCookie("uid"),e.username=a.getCookie("username")):Showbo.Msg.confirm("token已过期，请重新登录！",function(e){e&&(window.location.href="login.html")}),e},showBox:function(e){Showbo.Msg.alert(e)},confirmBox:function(e){Showbo.Msg.confirm(e,function(e){e&&(window.location.href="login.html")})}};t.default=a}]);